"use strict";

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _ = _interopRequireDefault(require("./"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

describe('<TripleSelectBox />', function () {
  afterEach(_react2.cleanup);
  it('should render the options', function () {
    var props = {
      initialValues: {
        left: ['Courgette', 'Date', 'Grape', 'Garlic', 'Fig', 'Endive', 'Fennel'],
        center: ['Mango', 'Lemon', 'Leek', 'Guava', 'Mushroom', 'Melon'],
        right: ['Apple', 'Orange', 'Apricot', 'Avocado', 'Beetroot', 'Broccoli', 'Carrot', 'Clementine']
      },
      onChange: function onChange() {}
    };

    var _render = (0, _react2.render)(_react["default"].createElement(_["default"], props)),
        container = _render.container;

    var selects = container.querySelectorAll('select');
    expect(selects).toHaveLength(3);
    expect(Array.from(selects[0].children).every(function (child) {
      return props.initialValues.left.includes(child.value);
    })).toBeTruthy();
    expect(Array.from(selects[1].children).every(function (child) {
      return props.initialValues.center.includes(child.value);
    })).toBeTruthy();
    expect(Array.from(selects[2].children).every(function (child) {
      return props.initialValues.right.includes(child.value);
    })).toBeTruthy();
  });
  it('should render the box titles', function () {
    var props = {
      initialValues: {
        left: ['Courgette', 'Date', 'Grape', 'Garlic', 'Fig', 'Endive', 'Fennel'],
        center: ['Mango', 'Lemon', 'Leek', 'Guava', 'Mushroom', 'Melon'],
        right: ['Apple', 'Orange', 'Apricot', 'Avocado', 'Beetroot', 'Broccoli', 'Carrot', 'Clementine']
      },
      titles: {
        left: 'left box',
        center: 'center box',
        right: 'right box'
      },
      onChange: function onChange() {}
    };

    var _render2 = (0, _react2.render)(_react["default"].createElement(_["default"], props)),
        container = _render2.container;

    var labels = container.querySelectorAll('label');
    expect(labels).toHaveLength(3);
    expect(labels[0].textContent).toBe('left box');
    expect(labels[1].textContent).toBe('center box');
    expect(labels[2].textContent).toBe('right box');
  });
  it('should be capable of send values from left to center and vice-versa', function () {
    var props = {
      initialValues: {
        left: ['a left box value'],
        center: ['3'],
        right: ['5']
      },
      onChange: jest.fn()
    };

    var _render3 = (0, _react2.render)(_react["default"].createElement(_["default"], props)),
        container = _render3.container,
        getAllByText = _render3.getAllByText;

    var _getAllByText = getAllByText('>>'),
        _getAllByText2 = _slicedToArray(_getAllByText, 1),
        leftToCenterButton = _getAllByText2[0];

    var _getAllByText3 = getAllByText('<<'),
        _getAllByText4 = _slicedToArray(_getAllByText3, 1),
        centerToLeftButton = _getAllByText4[0];

    var _container$querySelec = container.querySelectorAll('select'),
        _container$querySelec2 = _slicedToArray(_container$querySelec, 2),
        leftSelect = _container$querySelec2[0],
        centerSelect = _container$querySelec2[1];

    _react2.fireEvent.change(leftSelect, {
      target: {
        value: 'a left box value'
      }
    });

    _react2.fireEvent.click(leftToCenterButton);

    expect(Array.from(centerSelect.children).some(function (child) {
      return child.value === 'a left box value';
    })).toBeTruthy();
    expect(props.onChange).toBeCalledTimes(1);
    expect(props.onChange).toHaveBeenLastCalledWith({
      center: ['3', 'a left box value'],
      left: [],
      right: ['5']
    });

    _react2.fireEvent.change(centerSelect, {
      target: {
        value: '3'
      }
    });

    _react2.fireEvent.click(centerToLeftButton);

    expect(Array.from(leftSelect.children).some(function (child) {
      return child.value === '3';
    })).toBeTruthy();
    expect(props.onChange).toBeCalledTimes(2);
    expect(props.onChange).toHaveBeenLastCalledWith({
      center: ['a left box value'],
      left: ['3'],
      right: ['5']
    });
  });
  it('should be capable of send values from right to center and vice-versa', function () {
    var props = {
      initialValues: {
        left: ['a left box value'],
        center: ['3'],
        right: ['5']
      },
      onChange: jest.fn()
    };

    var _render4 = (0, _react2.render)(_react["default"].createElement(_["default"], props)),
        container = _render4.container,
        getAllByText = _render4.getAllByText;

    var _getAllByText5 = getAllByText('>>'),
        _getAllByText6 = _slicedToArray(_getAllByText5, 2),
        centerToRightButton = _getAllByText6[1];

    var _getAllByText7 = getAllByText('<<'),
        _getAllByText8 = _slicedToArray(_getAllByText7, 2),
        rightToCenterButton = _getAllByText8[1];

    var _container$querySelec3 = container.querySelectorAll('select'),
        _container$querySelec4 = _slicedToArray(_container$querySelec3, 3),
        centerSelect = _container$querySelec4[1],
        rightSelect = _container$querySelec4[2];

    _react2.fireEvent.change(rightSelect, {
      target: {
        value: '5'
      }
    });

    _react2.fireEvent.click(rightToCenterButton);

    expect(Array.from(centerSelect.children).some(function (child) {
      return child.value === '5';
    })).toBeTruthy();
    expect(props.onChange).toBeCalledTimes(1);
    expect(props.onChange).toHaveBeenLastCalledWith({
      center: ['3', '5'],
      left: ['a left box value'],
      right: []
    });

    _react2.fireEvent.change(centerSelect, {
      target: {
        value: '3'
      }
    });

    _react2.fireEvent.click(centerToRightButton);

    expect(Array.from(rightSelect.children).some(function (child) {
      return child.value === '3';
    })).toBeTruthy();
    expect(props.onChange).toBeCalledTimes(2);
    expect(props.onChange).toHaveBeenLastCalledWith({
      center: ['5'],
      left: ['a left box value'],
      right: ['3']
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb250YWluZXJzL1RyaXBsZVNlbGVjdEJveC9UcmlwbGVTZWxlY3RCb3gudGVzdC5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsImFmdGVyRWFjaCIsImNsZWFudXAiLCJpdCIsInByb3BzIiwiaW5pdGlhbFZhbHVlcyIsImxlZnQiLCJjZW50ZXIiLCJyaWdodCIsIm9uQ2hhbmdlIiwiY29udGFpbmVyIiwic2VsZWN0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJleHBlY3QiLCJ0b0hhdmVMZW5ndGgiLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsImV2ZXJ5IiwiY2hpbGQiLCJpbmNsdWRlcyIsInZhbHVlIiwidG9CZVRydXRoeSIsInRpdGxlcyIsImxhYmVscyIsInRleHRDb250ZW50IiwidG9CZSIsImplc3QiLCJmbiIsImdldEFsbEJ5VGV4dCIsImxlZnRUb0NlbnRlckJ1dHRvbiIsImNlbnRlclRvTGVmdEJ1dHRvbiIsImxlZnRTZWxlY3QiLCJjZW50ZXJTZWxlY3QiLCJmaXJlRXZlbnQiLCJjaGFuZ2UiLCJ0YXJnZXQiLCJjbGljayIsInNvbWUiLCJ0b0JlQ2FsbGVkVGltZXMiLCJ0b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgiLCJjZW50ZXJUb1JpZ2h0QnV0dG9uIiwicmlnaHRUb0NlbnRlckJ1dHRvbiIsInJpZ2h0U2VsZWN0Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7QUFFQUEsUUFBUSxDQUFDLHFCQUFELEVBQXdCLFlBQU07QUFDcENDLEVBQUFBLFNBQVMsQ0FBQ0MsZUFBRCxDQUFUO0FBRUFDLEVBQUFBLEVBQUUsQ0FBQywyQkFBRCxFQUE4QixZQUFNO0FBQ3BDLFFBQU1DLEtBQUssR0FBRztBQUNaQyxNQUFBQSxhQUFhLEVBQUU7QUFDYkMsUUFBQUEsSUFBSSxFQUFFLENBQUMsV0FBRCxFQUFjLE1BQWQsRUFBc0IsT0FBdEIsRUFBK0IsUUFBL0IsRUFBeUMsS0FBekMsRUFBZ0QsUUFB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UUFBUCxDQUFOLENBQXVCOEIsZUFBdkIsQ0FBdUMsQ0FBdkM7QUFDQTFCLElBQUFBLE1BQU0sQ0FBQ1QsS0FBSyxDQUFDSyxRQUFQLENBQU4sQ0FBdUIrQix3QkFBdkIsQ0FBZ0Q7QUFDOUNqQyxNQUFBQSxNQUFNLEVBQUUsQ0FBQyxHQUFELENBRHNDO0FBRTlDRCxNQUFBQSxJQUFJLEVBQUUsQ0FBQyxrQkFBRCxDQUZ3QztBQUc5Q0UsTUFBQUEsS0FBSyxFQUFFLENBQUMsR0FBRDtBQUh1QyxLQUFoRDtBQUtELEdBcENDLENBQUY7QUFxQ0QsQ0E5SE8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHJlbmRlciwgZmlyZUV2ZW50LCBjbGVhbnVwIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcblxuaW1wb3J0IFRyaXBsZVNlbGVjdEJveCBmcm9tICcuLydcblxuZGVzY3JpYmUoJzxUcmlwbGVTZWxlY3RCb3ggLz4nLCAoKSA9PiB7XG4gIGFmdGVyRWFjaChjbGVhbnVwKVxuXG4gIGl0KCdzaG91bGQgcmVuZGVyIHRoZSBvcHRpb25zJywgKCkgPT4ge1xuICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgaW5pdGlhbFZhbHVlczoge1xuICAgICAgICBsZWZ0OiBbJ0NvdXJnZXR0ZScsICdEYXRlJywgJ0dyYXBlJywgJ0dhcmxpYycsICdGaWcnLCAnRW5kaXZlJywgJ0Zlbm5lbCddLFxuICAgICAgICBjZW50ZXI6IFsnTWFuZ28nLCAnTGVtb24nLCAnTGVlaycsICdHdWF2YScsICdNdXNocm9vbScsICdNZWxvbiddLFxuICAgICAgICByaWdodDogWydBcHBsZScsICdPcmFuZ2UnLCAnQXByaWNvdCcsICdBdm9jYWRvJywgJ0JlZXRyb290JywgJ0Jyb2Njb2xpJywgJ0NhcnJvdCcsICdDbGVtZW50aW5lJ11cbiAgICAgIH0sXG4gICAgICBvbkNoYW5nZTogKCkgPT4ge31cbiAgICB9XG5cbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKDxUcmlwbGVTZWxlY3RCb3ggey4uLnByb3BzfSAvPilcbiAgICBjb25zdCBzZWxlY3RzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlbGVjdCcpXG4gICAgZXhwZWN0KHNlbGVjdHMpLnRvSGF2ZUxlbmd0aCgzKVxuICAgIGV4cGVjdChcbiAgICAgIEFycmF5LmZyb20oc2VsZWN0c1swXS5jaGlsZHJlbikuZXZlcnkoKGNoaWxkKSA9PiBwcm9wcy5pbml0aWFsVmFsdWVzLmxlZnQuaW5jbHVkZXMoY2hpbGQudmFsdWUpKVxuICAgICkudG9CZVRydXRoeSgpXG4gICAgZXhwZWN0KFxuICAgICAgQXJyYXkuZnJvbShzZWxlY3RzWzFdLmNoaWxkcmVuKS5ldmVyeSgoY2hpbGQpID0+IHByb3BzLmluaXRpYWxWYWx1ZXMuY2VudGVyLmluY2x1ZGVzKGNoaWxkLnZhbHVlKSlcbiAgICApLnRvQmVUcnV0aHkoKVxuICAgIGV4cGVjdChcbiAgICAgIEFycmF5LmZyb20oc2VsZWN0c1syXS5jaGlsZHJlbikuZXZlcnkoKGNoaWxkKSA9PiBwcm9wcy5pbml0aWFsVmFsdWVzLnJpZ2h0LmluY2x1ZGVzKGNoaWxkLnZhbHVlKSlcbiAgICApLnRvQmVUcnV0aHkoKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgcmVuZGVyIHRoZSBib3ggdGl0bGVzJywgKCkgPT4ge1xuICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgaW5pdGlhbFZhbHVlczoge1xuICAgICAgICBsZWZ0OiBbJ0NvdXJnZXR0ZScsICdEYXRlJywgJ0dyYXBlJywgJ0dhcmxpYycsICdGaWcnLCAnRW5kaXZlJywgJ0Zlbm5lbCddLFxuICAgICAgICBjZW50ZXI6IFsnTWFuZ28nLCAnTGVtb24nLCAnTGVlaycsICdHdWF2YScsICdNdXNocm9vbScsICdNZWxvbiddLFxuICAgICAgICByaWdodDogWydBcHBsZScsICdPcmFuZ2UnLCAnQXByaWNvdCcsICdBdm9jYWRvJywgJ0JlZXRyb290JywgJ0Jyb2Njb2xpJywgJ0NhcnJvdCcsICdDbGVtZW50aW5lJ11cbiAgICAgIH0sXG4gICAgICB0aXRsZXM6IHtcbiAgICAgICAgbGVmdDogJ2xlZnQgYm94JyxcbiAgICAgICAgY2VudGVyOiAnY2VudGVyIGJveCcsXG4gICAgICAgIHJpZ2h0OiAncmlnaHQgYm94J1xuICAgICAgfSxcbiAgICAgIG9uQ2hhbmdlOiAoKSA9PiB7fVxuICAgIH1cblxuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXIoPFRyaXBsZVNlbGVjdEJveCB7Li4ucHJvcHN9IC8+KVxuICAgIGNvbnN0IGxhYmVscyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbCcpXG5cbiAgICBleHBlY3QobGFiZWxzKS50b0hhdmVMZW5ndGgoMylcbiAgICBleHBlY3QobGFiZWxzWzBdLnRleHRDb250ZW50KS50b0JlKCdsZWZ0IGJveCcpXG4gICAgZXhwZWN0KGxhYmVsc1sxXS50ZXh0Q29udGVudCkudG9CZSgnY2VudGVyIGJveCcpXG4gICAgZXhwZWN0KGxhYmVsc1syXS50ZXh0Q29udGVudCkudG9CZSgncmlnaHQgYm94JylcbiAgfSlcblxuICBpdCgnc2hvdWxkIGJlIGNhcGFibGUgb2Ygc2VuZCB2YWx1ZXMgZnJvbSBsZWZ0IHRvIGNlbnRlciBhbmQgdmljZS12ZXJzYScsICgpID0+IHtcbiAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgIGluaXRpYWxWYWx1ZXM6IHtcbiAgICAgICAgbGVmdDogWydhIGxlZnQgYm94IHZhbHVlJ10sXG4gICAgICAgIGNlbnRlcjogWyczJ10sXG4gICAgICAgIHJpZ2h0OiBbJzUnXVxuICAgICAgfSxcbiAgICAgIG9uQ2hhbmdlOiBqZXN0LmZuKClcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvbnRhaW5lciwgZ2V0QWxsQnlUZXh0IH0gPSByZW5kZXIoPFRyaXBsZVNlbGVjdEJveCB7Li4ucHJvcHN9IC8+KVxuICAgIGNvbnN0IFtsZWZ0VG9DZW50ZXJCdXR0b25dID0gZ2V0QWxsQnlUZXh0KCc+PicpXG4gICAgY29uc3QgW2NlbnRlclRvTGVmdEJ1dHRvbl0gPSBnZXRBbGxCeVRleHQoJzw8JylcbiAgICBjb25zdCBbbGVmdFNlbGVjdCwgY2VudGVyU2VsZWN0XSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKVxuXG4gICAgZmlyZUV2ZW50LmNoYW5nZShsZWZ0U2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogJ2EgbGVmdCBib3ggdmFsdWUnIH0gfSlcbiAgICBmaXJlRXZlbnQuY2xpY2sobGVmdFRvQ2VudGVyQnV0dG9uKVxuXG4gICAgZXhwZWN0KEFycmF5LmZyb20oY2VudGVyU2VsZWN0LmNoaWxkcmVuKS5zb21lKChjaGlsZCkgPT4gY2hpbGQudmFsdWUgPT09ICdhIGxlZnQgYm94IHZhbHVlJykpLnRvQmVUcnV0aHkoKVxuICAgIGV4cGVjdChwcm9wcy5vbkNoYW5nZSkudG9CZUNhbGxlZFRpbWVzKDEpXG4gICAgZXhwZWN0KHByb3BzLm9uQ2hhbmdlKS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgoe1xuICAgICAgY2VudGVyOiBbJzMnLCAnYSBsZWZ0IGJveCB2YWx1ZSddLFxuICAgICAgbGVmdDogW10sXG4gICAgICByaWdodDogWyc1J11cbiAgICB9KVxuXG4gICAgZmlyZUV2ZW50LmNoYW5nZShjZW50ZXJTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnMycgfSB9KVxuICAgIGZpcmVFdmVudC5jbGljayhjZW50ZXJUb0xlZnRCdXR0b24pXG5cbiAgICBleHBlY3QoQXJyYXkuZnJvbShsZWZ0U2VsZWN0LmNoaWxkcmVuKS5zb21lKChjaGlsZCkgPT4gY2hpbGQudmFsdWUgPT09ICczJykpLnRvQmVUcnV0aHkoKVxuICAgIGV4cGVjdChwcm9wcy5vbkNoYW5nZSkudG9CZUNhbGxlZFRpbWVzKDIpXG4gICAgZXhwZWN0KHByb3BzLm9uQ2hhbmdlKS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgoe1xuICAgICAgY2VudGVyOiBbJ2EgbGVmdCBib3ggdmFsdWUnXSxcbiAgICAgIGxlZnQ6IFsnMyddLFxuICAgICAgcmlnaHQ6IFsnNSddXG4gICAgfSlcbiAgfSlcblxuICBpdCgnc2hvdWxkIGJlIGNhcGFibGUgb2Ygc2VuZCB2YWx1ZXMgZnJvbSByaWdodCB0byBjZW50ZXIgYW5kIHZpY2UtdmVyc2EnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICBpbml0aWFsVmFsdWVzOiB7XG4gICAgICAgIGxlZnQ6IFsnYSBsZWZ0IGJveCB2YWx1ZSddLFxuICAgICAgICBjZW50ZXI6IFsnMyddLFxuICAgICAgICByaWdodDogWyc1J11cbiAgICAgIH0sXG4gICAgICBvbkNoYW5nZTogamVzdC5mbigpXG4gICAgfVxuXG4gICAgY29uc3QgeyBjb250YWluZXIsIGdldEFsbEJ5VGV4dCB9ID0gcmVuZGVyKDxUcmlwbGVTZWxlY3RCb3ggey4uLnByb3BzfSAvPilcbiAgICBjb25zdCBbLCBjZW50ZXJUb1JpZ2h0QnV0dG9uXSA9IGdldEFsbEJ5VGV4dCgnPj4nKVxuICAgIGNvbnN0IFssIHJpZ2h0VG9DZW50ZXJCdXR0b25dID0gZ2V0QWxsQnlUZXh0KCc8PCcpXG4gICAgY29uc3QgWywgY2VudGVyU2VsZWN0LCByaWdodFNlbGVjdF0gPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JylcblxuICAgIGZpcmVFdmVudC5jaGFuZ2UocmlnaHRTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnNScgfSB9KVxuICAgIGZpcmVFdmVudC5jbGljayhyaWdodFRvQ2VudGVyQnV0dG9uKVxuXG4gICAgZXhwZWN0KEFycmF5LmZyb20oY2VudGVyU2VsZWN0LmNoaWxkcmVuKS5zb21lKChjaGlsZCkgPT4gY2hpbGQudmFsdWUgPT09ICc1JykpLnRvQmVUcnV0aHkoKVxuICAgIGV4cGVjdChwcm9wcy5vbkNoYW5nZSkudG9CZUNhbGxlZFRpbWVzKDEpXG4gICAgZXhwZWN0KHByb3BzLm9uQ2hhbmdlKS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgoe1xuICAgICAgY2VudGVyOiBbJzMnLCAnNSddLFxuICAgICAgbGVmdDogWydhIGxlZnQgYm94IHZhbHVlJ10sXG4gICAgICByaWdodDogW11cbiAgICB9KVxuXG4gICAgZmlyZUV2ZW50LmNoYW5nZShjZW50ZXJTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnMycgfSB9KVxuICAgIGZpcmVFdmVudC5jbGljayhjZW50ZXJUb1JpZ2h0QnV0dG9uKVxuXG4gICAgZXhwZWN0KEFycmF5LmZyb20ocmlnaHRTZWxlY3QuY2hpbGRyZW4pLnNvbWUoKGNoaWxkKSA9PiBjaGlsZC52YWx1ZSA9PT0gJzMnKSkudG9CZVRydXRoeSgpXG4gICAgZXhwZWN0KHByb3BzLm9uQ2hhbmdlKS50b0JlQ2FsbGVkVGltZXMoMilcbiAgICBleHBlY3QocHJvcHMub25DaGFuZ2UpLnRvSGF2ZUJlZW5MYXN0Q2FsbGVkV2l0aCh7XG4gICAgICBjZW50ZXI6IFsnNSddLFxuICAgICAgbGVmdDogWydhIGxlZnQgYm94IHZhbHVlJ10sXG4gICAgICByaWdodDogWyczJ11cbiAgICB9KVxuICB9KVxufSlcbiJdfQ==