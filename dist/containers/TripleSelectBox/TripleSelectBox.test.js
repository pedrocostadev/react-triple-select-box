"use strict";

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _ = _interopRequireDefault(require("./"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

describe('<TripleSelectBox />', function () {
  afterEach(_react2.cleanup);
  it('should render the options', function () {
    var props = {
      options: {
        left: ['Courgette', 'Date', 'Grape', 'Garlic', 'Fig', 'Endive', 'Fennel'],
        center: ['Mango', 'Lemon', 'Leek', 'Guava', 'Mushroom', 'Melon'],
        right: ['Apple', 'Orange', 'Apricot', 'Avocado', 'Beetroot', 'Broccoli', 'Carrot', 'Clementine']
      },
      onChange: function onChange() {}
    };

    var _render = (0, _react2.render)(_react["default"].createElement(_["default"], props)),
        container = _render.container;

    var selects = container.querySelectorAll('select');
    expect(selects).toHaveLength(3);
    expect(Array.from(selects[0].children).every(function (child) {
      return props.options.left.includes(child.value);
    })).toBeTruthy();
    expect(Array.from(selects[1].children).every(function (child) {
      return props.options.center.includes(child.value);
    })).toBeTruthy();
    expect(Array.from(selects[2].children).every(function (child) {
      return props.options.right.includes(child.value);
    })).toBeTruthy();
  });
  it('should render the box titles', function () {
    var props = {
      options: {
        left: ['Courgette', 'Date', 'Grape', 'Garlic', 'Fig', 'Endive', 'Fennel'],
        center: ['Mango', 'Lemon', 'Leek', 'Guava', 'Mushroom', 'Melon'],
        right: ['Apple', 'Orange', 'Apricot', 'Avocado', 'Beetroot', 'Broccoli', 'Carrot', 'Clementine']
      },
      titles: {
        left: 'left box',
        center: 'center box',
        right: 'right box'
      },
      onChange: function onChange() {}
    };

    var _render2 = (0, _react2.render)(_react["default"].createElement(_["default"], props)),
        container = _render2.container;

    var labels = container.querySelectorAll('label');
    expect(labels).toHaveLength(3);
    expect(labels[0].textContent).toBe('left box');
    expect(labels[1].textContent).toBe('center box');
    expect(labels[2].textContent).toBe('right box');
  });
  it('should be capable of send values from left to center and vice-versa', function () {
    var props = {
      options: {
        left: ['a left box value'],
        center: ['3'],
        right: ['5']
      },
      onChange: jest.fn()
    };

    var _render3 = (0, _react2.render)(_react["default"].createElement(_["default"], props)),
        container = _render3.container,
        getAllByText = _render3.getAllByText;

    var _getAllByText = getAllByText('>>'),
        _getAllByText2 = _slicedToArray(_getAllByText, 1),
        leftToCenterButton = _getAllByText2[0];

    var _getAllByText3 = getAllByText('<<'),
        _getAllByText4 = _slicedToArray(_getAllByText3, 1),
        centerToLeftButton = _getAllByText4[0];

    var _container$querySelec = container.querySelectorAll('select'),
        _container$querySelec2 = _slicedToArray(_container$querySelec, 2),
        leftSelect = _container$querySelec2[0],
        centerSelect = _container$querySelec2[1];

    _react2.fireEvent.change(leftSelect, {
      target: {
        value: 'a left box value'
      }
    });

    _react2.fireEvent.click(leftToCenterButton);

    expect(Array.from(centerSelect.children).some(function (child) {
      return child.value === 'a left box value';
    })).toBeTruthy();
    expect(props.onChange).toBeCalledTimes(1);
    expect(props.onChange).toHaveBeenLastCalledWith({
      center: [{
        value: '3'
      }, {
        value: 'a left box value'
      }],
      left: [],
      right: [{
        value: '5'
      }]
    });

    _react2.fireEvent.change(centerSelect, {
      target: {
        value: '3'
      }
    });

    _react2.fireEvent.click(centerToLeftButton);

    expect(Array.from(leftSelect.children).some(function (child) {
      return child.value === '3';
    })).toBeTruthy();
    expect(props.onChange).toBeCalledTimes(2);
    expect(props.onChange).toHaveBeenLastCalledWith({
      center: [{
        value: 'a left box value'
      }],
      left: [{
        value: '3'
      }],
      right: [{
        value: '5'
      }]
    });
  });
  it('should be capable of send values from right to center and vice-versa', function () {
    var props = {
      options: {
        left: [{
          value: 'a left box value'
        }],
        center: [{
          value: '3'
        }],
        right: [{
          value: '5'
        }]
      },
      onChange: jest.fn()
    };

    var _render4 = (0, _react2.render)(_react["default"].createElement(_["default"], props)),
        container = _render4.container,
        getAllByText = _render4.getAllByText;

    var _getAllByText5 = getAllByText('>>'),
        _getAllByText6 = _slicedToArray(_getAllByText5, 2),
        centerToRightButton = _getAllByText6[1];

    var _getAllByText7 = getAllByText('<<'),
        _getAllByText8 = _slicedToArray(_getAllByText7, 2),
        rightToCenterButton = _getAllByText8[1];

    var _container$querySelec3 = container.querySelectorAll('select'),
        _container$querySelec4 = _slicedToArray(_container$querySelec3, 3),
        centerSelect = _container$querySelec4[1],
        rightSelect = _container$querySelec4[2];

    _react2.fireEvent.change(rightSelect, {
      target: {
        value: '5'
      }
    });

    _react2.fireEvent.click(rightToCenterButton);

    expect(Array.from(centerSelect.children).some(function (child) {
      return child.value === '5';
    })).toBeTruthy();
    expect(props.onChange).toBeCalledTimes(1);
    expect(props.onChange).toHaveBeenLastCalledWith({
      center: [{
        value: '3'
      }, {
        value: '5'
      }],
      left: [{
        value: 'a left box value'
      }],
      right: []
    });

    _react2.fireEvent.change(centerSelect, {
      target: {
        value: '3'
      }
    });

    _react2.fireEvent.click(centerToRightButton);

    expect(Array.from(rightSelect.children).some(function (child) {
      return child.value === '3';
    })).toBeTruthy();
    expect(props.onChange).toBeCalledTimes(2);
    expect(props.onChange).toHaveBeenLastCalledWith({
      center: [{
        value: '5'
      }],
      left: [{
        value: 'a left box value'
      }],
      right: [{
        value: '3'
      }]
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb250YWluZXJzL1RyaXBsZVNlbGVjdEJveC9UcmlwbGVTZWxlY3RCb3gudGVzdC5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsImFmdGVyRWFjaCIsImNsZWFudXAiLCJpdCIsInByb3BzIiwib3B0aW9ucyIsImxlZnQiLCJjZW50ZXIiLCJyaWdodCIsIm9uQ2hhbmdlIiwiY29udGFpbmVyIiwic2VsZWN0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJleHBlY3QiLCJ0b0hhdmVMZW5ndGgiLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsImV2ZXJ5IiwiY2hpbGQiLCJpbmNsdWRlcyIsInZhbHVlIiwidG9CZVRydXRoeSIsInRpdGxlcyIsImxhYmVscyIsInRleHRDb250ZW50IiwidG9CZSIsImplc3QiLCJmbiIsImdldEFsbEJ5VGV4dCIsImxlZnRUb0NlbnRlckJ1dHRvbiIsImNlbnRlclRvTGVmdEJ1dHRvbiIsImxlZnRTZWxlY3QiLCJjZW50ZXJTZWxlY3QiLCJmaXJlRXZlbnQiLCJjaGFuZ2UiLCJ0YXJnZXQiLCJjbGljayIsInNvbWUiLCJ0b0JlQ2FsbGVkVGltZXMiLCJ0b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgiLCJjZW50ZXJUb1JpZ2h0QnV0dG9uIiwicmlnaHRUb0NlbnRlckJ1dHRvbiIsInJpZ2h0U2VsZWN0Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7QUFFQUEsUUFBUSxDQUFDLHFCQUFELEVBQXdCLFlBQU07QUFDcENDLEVBQUFBLFNBQVMsQ0FBQ0MsZUFBRCxDQUFUO0FBRUFDLEVBQUFBLEVBQUUsQ0FBQywyQkFBRCxFQUE4QixZQUFNO0FBQ3BDLFFBQU1DLEtBQUssR0FBRztBQUNaQyxNQUFBQSxPQUFPLEVBQUU7QUFDUEMsUUFBQUEsSUFBSSxFQUFFLENBQUMsV0FBRCxFQUFjLE1BQWQsRUFBc0IsT0FBdEIsRUFBK0IsUUFBL0IsRUFBeUMsS0FBekMsRUFBZ0QsUUFBaEQsRUFB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RixZQUFqQixFQUErQjtBQUFFRyxNQUFBQSxNQUFNLEVBQUU7QUFBRWYsUUFBQUEsS0FBSyxFQUFFO0FBQVQ7QUFBVixLQUEvQjs7QUFDQWEsc0JBQVVHLEtBQVYsQ0FBZ0JJLG1CQUFoQjs7QUFFQTVCLElBQUFBLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDQyxJQUFOLENBQVcyQixXQUFXLENBQUMxQixRQUF2QixFQUFpQ3FCLElBQWpDLENBQXNDLFVBQUNuQixLQUFEO0FBQUEsYUFBV0EsS0FBSyxDQUFDRSxLQUFOLEtBQWdCLEdBQTNCO0FBQUEsS0FBdEMsQ0FBRCxDQUFOLENBQThFQyxVQUE5RTtBQUNBVCxJQUFBQSxNQUFNLENBQUNULEtBQUssQ0FBQ0ssUUFBUCxDQUFOLENBQXVCOEIsZUFBdkIsQ0FBdUMsQ0FBdkM7QUFDQTFCLElBQUFBLE1BQU0sQ0FBQ1QsS0FBSyxDQUFDSyxRQUFQLENBQU4sQ0FBdUIrQix3QkFBdkIsQ0FBZ0Q7QUFDOUNqQyxNQUFBQSxNQUFNLEVBQUUsQ0FBRTtBQUFFYyxRQUFBQSxLQUFLLEVBQUU7QUFBVCxPQUFGLENBRHNDO0FBRTlDZixNQUFBQSxJQUFJLEVBQUUsQ0FBRTtBQUFFZSxRQUFBQSxLQUFLLEVBQUU7QUFBVCxPQUFGLENBRndDO0FBRzlDYixNQUFBQSxLQUFLLEVBQUUsQ0FBRTtBQUFFYSxRQUFBQSxLQUFLLEVBQUU7QUFBVCxPQUFGO0FBSHVDLEtBQWhEO0FBS0QsR0FwQ0MsQ0FBRjtBQXNDRCxDQS9ITyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyLCBmaXJlRXZlbnQsIGNsZWFudXAgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xuXG5pbXBvcnQgVHJpcGxlU2VsZWN0Qm94IGZyb20gJy4vJ1xuXG5kZXNjcmliZSgnPFRyaXBsZVNlbGVjdEJveCAvPicsICgpID0+IHtcbiAgYWZ0ZXJFYWNoKGNsZWFudXApXG5cbiAgaXQoJ3Nob3VsZCByZW5kZXIgdGhlIG9wdGlvbnMnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGxlZnQ6IFsnQ291cmdldHRlJywgJ0RhdGUnLCAnR3JhcGUnLCAnR2FybGljJywgJ0ZpZycsICdFbmRpdmUnLCAnRmVubmVsJ10sXG4gICAgICAgIGNlbnRlcjogWydNYW5nbycsICdMZW1vbicsICdMZWVrJywgJ0d1YXZhJywgJ011c2hyb29tJywgJ01lbG9uJ10sXG4gICAgICAgIHJpZ2h0OiBbJ0FwcGxlJywgJ09yYW5nZScsICdBcHJpY290JywgJ0F2b2NhZG8nLCAnQmVldHJvb3QnLCAnQnJvY2NvbGknLCAnQ2Fycm90JywgJ0NsZW1lbnRpbmUnXVxuICAgICAgfSxcbiAgICAgIG9uQ2hhbmdlOiAoKSA9PiB7fVxuICAgIH1cblxuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXIoPFRyaXBsZVNlbGVjdEJveCB7Li4ucHJvcHN9IC8+KVxuICAgIGNvbnN0IHNlbGVjdHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JylcbiAgICBleHBlY3Qoc2VsZWN0cykudG9IYXZlTGVuZ3RoKDMpXG4gICAgZXhwZWN0KFxuICAgICAgQXJyYXkuZnJvbShzZWxlY3RzWzBdLmNoaWxkcmVuKS5ldmVyeSgoY2hpbGQpID0+IHByb3BzLm9wdGlvbnMubGVmdC5pbmNsdWRlcyhjaGlsZC52YWx1ZSkpXG4gICAgKS50b0JlVHJ1dGh5KClcbiAgICBleHBlY3QoXG4gICAgICBBcnJheS5mcm9tKHNlbGVjdHNbMV0uY2hpbGRyZW4pLmV2ZXJ5KChjaGlsZCkgPT4gcHJvcHMub3B0aW9ucy5jZW50ZXIuaW5jbHVkZXMoY2hpbGQudmFsdWUpKVxuICAgICkudG9CZVRydXRoeSgpXG4gICAgZXhwZWN0KFxuICAgICAgQXJyYXkuZnJvbShzZWxlY3RzWzJdLmNoaWxkcmVuKS5ldmVyeSgoY2hpbGQpID0+IHByb3BzLm9wdGlvbnMucmlnaHQuaW5jbHVkZXMoY2hpbGQudmFsdWUpKVxuICAgICkudG9CZVRydXRoeSgpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCByZW5kZXIgdGhlIGJveCB0aXRsZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGxlZnQ6IFsnQ291cmdldHRlJywgJ0RhdGUnLCAnR3JhcGUnLCAnR2FybGljJywgJ0ZpZycsICdFbmRpdmUnLCAnRmVubmVsJ10sXG4gICAgICAgIGNlbnRlcjogWydNYW5nbycsICdMZW1vbicsICdMZWVrJywgJ0d1YXZhJywgJ011c2hyb29tJywgJ01lbG9uJ10sXG4gICAgICAgIHJpZ2h0OiBbJ0FwcGxlJywgJ09yYW5nZScsICdBcHJpY290JywgJ0F2b2NhZG8nLCAnQmVldHJvb3QnLCAnQnJvY2NvbGknLCAnQ2Fycm90JywgJ0NsZW1lbnRpbmUnXVxuICAgICAgfSxcbiAgICAgIHRpdGxlczoge1xuICAgICAgICBsZWZ0OiAnbGVmdCBib3gnLFxuICAgICAgICBjZW50ZXI6ICdjZW50ZXIgYm94JyxcbiAgICAgICAgcmlnaHQ6ICdyaWdodCBib3gnXG4gICAgICB9LFxuICAgICAgb25DaGFuZ2U6ICgpID0+IHt9XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcig8VHJpcGxlU2VsZWN0Qm94IHsuLi5wcm9wc30gLz4pXG4gICAgY29uc3QgbGFiZWxzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xhYmVsJylcblxuICAgIGV4cGVjdChsYWJlbHMpLnRvSGF2ZUxlbmd0aCgzKVxuICAgIGV4cGVjdChsYWJlbHNbMF0udGV4dENvbnRlbnQpLnRvQmUoJ2xlZnQgYm94JylcbiAgICBleHBlY3QobGFiZWxzWzFdLnRleHRDb250ZW50KS50b0JlKCdjZW50ZXIgYm94JylcbiAgICBleHBlY3QobGFiZWxzWzJdLnRleHRDb250ZW50KS50b0JlKCdyaWdodCBib3gnKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgYmUgY2FwYWJsZSBvZiBzZW5kIHZhbHVlcyBmcm9tIGxlZnQgdG8gY2VudGVyIGFuZCB2aWNlLXZlcnNhJywgKCkgPT4ge1xuICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgb3B0aW9uczoge1xuICAgICAgICBsZWZ0OiBbJ2EgbGVmdCBib3ggdmFsdWUnXSxcbiAgICAgICAgY2VudGVyOiBbJzMnXSxcbiAgICAgICAgcmlnaHQ6IFsnNSddXG4gICAgICB9LFxuICAgICAgb25DaGFuZ2U6IGplc3QuZm4oKVxuICAgIH1cblxuICAgIGNvbnN0IHsgY29udGFpbmVyLCBnZXRBbGxCeVRleHQgfSA9IHJlbmRlcig8VHJpcGxlU2VsZWN0Qm94IHsuLi5wcm9wc30gLz4pXG4gICAgY29uc3QgW2xlZnRUb0NlbnRlckJ1dHRvbl0gPSBnZXRBbGxCeVRleHQoJz4+JylcbiAgICBjb25zdCBbY2VudGVyVG9MZWZ0QnV0dG9uXSA9IGdldEFsbEJ5VGV4dCgnPDwnKVxuICAgIGNvbnN0IFtsZWZ0U2VsZWN0LCBjZW50ZXJTZWxlY3RdID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlbGVjdCcpXG5cbiAgICBmaXJlRXZlbnQuY2hhbmdlKGxlZnRTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnYSBsZWZ0IGJveCB2YWx1ZScgfSB9KVxuICAgIGZpcmVFdmVudC5jbGljayhsZWZ0VG9DZW50ZXJCdXR0b24pXG5cbiAgICBleHBlY3QoQXJyYXkuZnJvbShjZW50ZXJTZWxlY3QuY2hpbGRyZW4pLnNvbWUoKGNoaWxkKSA9PiBjaGlsZC52YWx1ZSA9PT0gJ2EgbGVmdCBib3ggdmFsdWUnKSkudG9CZVRydXRoeSgpXG4gICAgZXhwZWN0KHByb3BzLm9uQ2hhbmdlKS50b0JlQ2FsbGVkVGltZXMoMSlcbiAgICBleHBlY3QocHJvcHMub25DaGFuZ2UpLnRvSGF2ZUJlZW5MYXN0Q2FsbGVkV2l0aCh7XG4gICAgICBjZW50ZXI6IFsgeyB2YWx1ZTogJzMnIH0sIHsgdmFsdWU6ICdhIGxlZnQgYm94IHZhbHVlJyB9XSxcbiAgICAgIGxlZnQ6IFtdLFxuICAgICAgcmlnaHQ6IFt7IHZhbHVlOiAnNScgfV1cbiAgICB9KVxuXG4gICAgZmlyZUV2ZW50LmNoYW5nZShjZW50ZXJTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnMycgfSB9KVxuICAgIGZpcmVFdmVudC5jbGljayhjZW50ZXJUb0xlZnRCdXR0b24pXG5cbiAgICBleHBlY3QoQXJyYXkuZnJvbShsZWZ0U2VsZWN0LmNoaWxkcmVuKS5zb21lKChjaGlsZCkgPT4gY2hpbGQudmFsdWUgPT09ICczJykpLnRvQmVUcnV0aHkoKVxuICAgIGV4cGVjdChwcm9wcy5vbkNoYW5nZSkudG9CZUNhbGxlZFRpbWVzKDIpXG4gICAgZXhwZWN0KHByb3BzLm9uQ2hhbmdlKS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgoe1xuICAgICAgY2VudGVyOiBbIHsgdmFsdWU6ICdhIGxlZnQgYm94IHZhbHVlJyB9IF0sXG4gICAgICBsZWZ0OiBbIHsgdmFsdWU6ICczJyB9IF0sXG4gICAgICByaWdodDogWyB7IHZhbHVlOiAnNScgfSBdXG4gICAgfSlcbiAgfSlcblxuICBpdCgnc2hvdWxkIGJlIGNhcGFibGUgb2Ygc2VuZCB2YWx1ZXMgZnJvbSByaWdodCB0byBjZW50ZXIgYW5kIHZpY2UtdmVyc2EnLCAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGxlZnQ6IFsgeyB2YWx1ZTogJ2EgbGVmdCBib3ggdmFsdWUnIH0gXSxcbiAgICAgICAgY2VudGVyOiBbIHsgdmFsdWU6ICczJyB9IF0sXG4gICAgICAgIHJpZ2h0OiBbIHsgdmFsdWU6ICc1JyB9IF1cbiAgICAgIH0sXG4gICAgICBvbkNoYW5nZTogamVzdC5mbigpXG4gICAgfVxuXG4gICAgY29uc3QgeyBjb250YWluZXIsIGdldEFsbEJ5VGV4dCB9ID0gcmVuZGVyKDxUcmlwbGVTZWxlY3RCb3ggey4uLnByb3BzfSAvPilcbiAgICBjb25zdCBbLCBjZW50ZXJUb1JpZ2h0QnV0dG9uXSA9IGdldEFsbEJ5VGV4dCgnPj4nKVxuICAgIGNvbnN0IFssIHJpZ2h0VG9DZW50ZXJCdXR0b25dID0gZ2V0QWxsQnlUZXh0KCc8PCcpXG4gICAgY29uc3QgWywgY2VudGVyU2VsZWN0LCByaWdodFNlbGVjdF0gPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JylcblxuICAgIGZpcmVFdmVudC5jaGFuZ2UocmlnaHRTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnNScgfSB9KVxuICAgIGZpcmVFdmVudC5jbGljayhyaWdodFRvQ2VudGVyQnV0dG9uKVxuXG4gICAgZXhwZWN0KEFycmF5LmZyb20oY2VudGVyU2VsZWN0LmNoaWxkcmVuKS5zb21lKChjaGlsZCkgPT4gY2hpbGQudmFsdWUgPT09ICc1JykpLnRvQmVUcnV0aHkoKVxuICAgIGV4cGVjdChwcm9wcy5vbkNoYW5nZSkudG9CZUNhbGxlZFRpbWVzKDEpXG4gICAgZXhwZWN0KHByb3BzLm9uQ2hhbmdlKS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgoe1xuICAgICAgY2VudGVyOiBbIHsgdmFsdWU6ICczJyB9LCB7IHZhbHVlOiAnNScgfSBdLFxuICAgICAgbGVmdDogWyB7IHZhbHVlOiAnYSBsZWZ0IGJveCB2YWx1ZScgfSBdLFxuICAgICAgcmlnaHQ6IFtdXG4gICAgfSlcblxuICAgIGZpcmVFdmVudC5jaGFuZ2UoY2VudGVyU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogJzMnIH0gfSlcbiAgICBmaXJlRXZlbnQuY2xpY2soY2VudGVyVG9SaWdodEJ1dHRvbilcblxuICAgIGV4cGVjdChBcnJheS5mcm9tKHJpZ2h0U2VsZWN0LmNoaWxkcmVuKS5zb21lKChjaGlsZCkgPT4gY2hpbGQudmFsdWUgPT09ICczJykpLnRvQmVUcnV0aHkoKVxuICAgIGV4cGVjdChwcm9wcy5vbkNoYW5nZSkudG9CZUNhbGxlZFRpbWVzKDIpXG4gICAgZXhwZWN0KHByb3BzLm9uQ2hhbmdlKS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgoe1xuICAgICAgY2VudGVyOiBbIHsgdmFsdWU6ICc1JyB9IF0sXG4gICAgICBsZWZ0OiBbIHsgdmFsdWU6ICdhIGxlZnQgYm94IHZhbHVlJyB9IF0sXG4gICAgICByaWdodDogWyB7IHZhbHVlOiAnMycgfSBdXG4gICAgfSlcbiAgfSlcblxufSlcbiJdfQ==